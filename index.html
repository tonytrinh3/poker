<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div class="player-1"></div>
        <button class = "card"></button>
    <br/>
    <div class="player-1"></div>
</body>
<script>

    const state = {};



    // const fetchAsyncA = async () => await (await fetch('https://api.github.com')).json()
    // https://gist.github.com/msmfsd/fca50ab095b795eb39739e8c4357a808
    
    const getDeckOfCards = async () => {
        // document.querySelector(".card").style.display = "none";



        try{
            const result = await fetch('https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1');
            const data = await result.json();
            console.log(data);
            //this is an array of 5 
            const playerOne = await(await fetch(`https://deckofcardsapi.com/api/deck/${data.deck_id}/draw/?count=5`)).json();
            console.log(playerOne);
            const playerTwo= await(await fetch(`https://deckofcardsapi.com/api/deck/${data.deck_id}/draw/?count=5`)).json();
            console.log(playerTwo);

         
            

            // document.querySelector('.btn-roll').addEventListener('click', function() {}

            //https://stackoverflow.com/questions/33846682/react-onclick-function-fires-on-render/33846747
            //Because you are calling that function instead of passing the function to onClick, change that line to this:


// <!-- 
//             const displayCards1 = playerOne.cards.map((currentElement) =>{
//                 //apparently each button need their own unique code in order to have each button click a new card
//                 const displayCard = `<button class="buttonCard${currentElement.code}">
//                     <img src = ${currentElement.image} alt = ${currentElement.code}>
//                     </button>`

//                 const getNewCard = async () => {
//                     const newCard = await(await fetch(`https://deckofcardsapi.com/api/deck/${data.deck_id}/draw/?count=1`)).json();
//                     console.log(newCard);
//                 };
//                 document.querySelector('.playerOne').insertAdjacentHTML('beforeend',displayCard);
//                 document.querySelector(`.buttonCard${currentElement.code}`).addEventListener('click', () =>getNewCard())
//             });
//             console.log(displayCards1);
//      -->

            const displayCard1 = `<img src = ${playerOne.cards[0].image} alt = ${playerOne.cards[0].code} d>`;

            // document.querySelector('.playerOne').insertAdjacentHTML('beforeend',displayCard1);

   

            // const displayCard2 = `<button class="buttonCard${playerOne.cards[1].code}">
            //     <img src = ${playerOne.cards[1].image} alt = ${playerOne.cards[1].code}>
            //     </button>`;

            // const array = [displayCard1,displayCard2];

            document.querySelector('.card').insertAdjacentHTML('beforeend',displayCard1);

            let dummy= playerOne.cards[0].code;

            document.querySelector(`.card`).addEventListener('click', async () =>{   

                const newCard = await(await fetch(`https://deckofcardsapi.com/api/deck/${data.deck_id}/draw/?count=1`)).json();
                const displayNewCard = `<img src = ${newCard.cards[0].image} alt = ${newCard.cards[0].code}>`;

                
                
                const el = document.querySelector(`.card`);
                // const el2 = document.querySelector(`.buttonCard${playerOne.cards[1].code}`);
               
                el.removeChild(el.childNodes[0]);
                // // el2.parentNode.removeChild(el2);
                
                
                // array.splice(0,1,displayNewCard);
                // console.log(array);
                
                document.querySelector('.card').insertAdjacentHTML('beforeend', displayNewCard);
                // dummy = newCard.cards[0].code;
                
            });


            // const displayCards2 = playerTwo.cards.map((currentElement) =>{
            //     const displayCard = `<button class="buttonCard${currentElement.code}">
            //         <img src = ${currentElement.image} alt = ${currentElement.code}>
            //         </button>`
            //     const getNewCard = async () => {
            //         const newCard = await(await fetch(`https://deckofcardsapi.com/api/deck/${data.deck_id}/draw/?count=1`)).json();
            //         console.log(newCard);
            //     };
            //     document.querySelector('.playerTwo').insertAdjacentHTML('beforeend',displayCard);
            //     document.querySelector(`.buttonCard${currentElement.code}`).addEventListener('click', () =>getNewCard())
            // });

            //render
            
        } catch (error){
            alert(error);
        }
       
    };

    getDeckOfCards();

    // getDeckOfCards();
    //     let dataDeck;
    
    // getDeckOfCards().then(data=>{
    //     dataDeck= data;
    //     //console.log(dataDeck);
    // })

  

    // const drawCard = async (id) =>{
    //     try{
    //         // getDeckOfCards();

    //         const draw = await fetch(`https://deckofcardsapi.com/api/deck/${id}/draw/?count=2`);
    //         draw = await draw.json();
    //         console.log(draw);
    //     }catch (error){
    //         alert(error);
    //     }
    // };
    
    // drawCard(data.deck_id);
  



    
</script>
</html>